#!/bin/sh
# Auto-push the current branch to origin after a successful commit.
# This script is intended for Git for Windows (Git Bash) or POSIX shells.

branch=$(git rev-parse --abbrev-ref HEAD)
if [ "$branch" = "HEAD" ]; then
  echo "Detached HEAD; skipping auto-push."
  exit 0
fi

echo "Auto-pushing branch $branch to origin..."
# Push branch and tags (if you create tags locally)
if git push origin "$branch" --follow-tags; then
  echo "Auto-push succeeded."
  exit 0
else
  rc=$?
  echo "Auto-push failed with exit $rc"
  exit $rc
fi
